{"version":3,"sources":["ParserEditor.js","Result.js","Source.js","App.js","index.js","Parser.js","icon__download.png"],"names":["ParserEditor","_ref","isPortraitMode","parser","onError","onParserChange","_useState","useState","_useState2","Object","slicedToArray","editorValue","setEditorValue","useEffect","toString","react_default","a","createElement","lib_default","onChange","newValue","Parser","e","value","mode","theme","fontSize","debounceChangePeriod","setOptions","tabSize","style","width","concat","height","Result","data","error","currentFile","setCurrentFile","_download","asyncToGenerator","regenerator_default","mark","_callee","zip","output","wrap","_context","prev","next","jszip","folder","forEach","_ref3","name","file","JSON","stringify","generateAsync","type","sent","saveAs","stop","apply","this","arguments","Root","DownloadButton","onClick","TabBar","map","_ref2","index","Tab","key","isSelected","message","readOnly","highlightActiveLine","editorProps","$blockScrolling","styled","div","_templateObject","_templateObject2","_templateObject3","_ref4","_templateObject4","iconDownload","onDataChange","parse","tmpParser","localStorage","getItem","tmpSource","defaultParser","defaultSource","apple","blue","cat","App_templateObject","Column","App_templateObject2","ReactDOM","render","source","setSource","_useState3","_useState4","setParser","_useState5","_useState6","result","setResult","_useState7","_useState8","setError","_useState9","window","innerHeight","innerWidth","_useState10","setIsPortraitMode","onResize","addEventListener","removeEventListener","Array","isArray","Error","setItem","App_Root","Source_ParserEditor","document","getElementById","mockDataProxyHandler","get","Proxy","func","_Users_chiao_workspace_editjson_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","eval","mockData","module","exports"],"mappings":"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","file":"static/js/main.4d7b96f3.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AceEditor from \"react-ace\";\nimport Parser from \"./Parser\";\n\nexport default function ParserEditor({ isPortraitMode, parser, onError, onParserChange }) {\n  const [editorValue, setEditorValue] = useState();\n\n  useEffect(() => setEditorValue(parser.toString()), [parser]);\n\n  function onChange(newValue) {\n    setEditorValue(newValue + \"\");\n\n    try {\n      const parser = new Parser(newValue);\n      onParserChange(parser);\n      onError();\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n  return (\n    <AceEditor\n      onChange={onChange}\n      value={editorValue}\n      mode=\"javascript\"\n      theme=\"monokai\"\n      fontSize={14}\n      debounceChangePeriod={1000}\n      setOptions={{ tabSize: 2 }}\n      style={{\n        width: `${isPortraitMode ? 100 : 50}vw`,\n        height: `${isPortraitMode ? 50 : 100}vh`\n      }}\n    />\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport AceEditor from \"react-ace\";\nimport jszip from 'jszip';\nimport { saveAs } from 'file-saver';\nimport iconDownload from './icon__download.png';\n\n\nexport default function Result({ data, error, isPortraitMode }) {\n  const [currentFile, setCurrentFile] = useState(0);\n\n\n  async function download() {\n    const zip = new jszip().folder('output');\n    data.forEach(({ name, data }) => zip.file(`${name}.json`, JSON.stringify(data, null, 2)));\n    const output = await zip.generateAsync({type:\"blob\"});\n    saveAs(output, 'output');\n  }\n\n  return (\n    <Root>\n      <DownloadButton onClick={download}/>\n      {data && (\n        <TabBar>\n          {data.map(({ name }, index) => (\n            <Tab\n              key={index}\n              isSelected={index === currentFile}\n              onClick={() => setCurrentFile(index)}\n            >\n              {name}\n            </Tab>\n          ))}\n          <Tab/>\n        </TabBar>\n      )}\n      {error && <div>{error.message}</div>}\n      <AceEditor\n        readOnly\n        mode=\"javascript\"\n        theme=\"monokai\"\n        fontSize={14}\n        value={\n          data &&\n          data[currentFile] &&\n          JSON.stringify(data[currentFile].data, null, 2)\n        }\n        highlightActiveLine={false}\n        editorProps={{ $blockScrolling: true }}\n        setOptions={{ tabSize: 2 }}\n        style={{\n          width: `${isPortraitMode ? 100 : 50}vw`,\n          height: `${isPortraitMode ? 50 : 50}vh`\n        }}\n      />\n    </Root>\n  );\n}\n\nconst Root = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst TabBar = styled.div`\n  display: flex;\n  background: #000;\n  overflow: auto;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\nconst Tab = styled.div`\n  width: 100px;\n  height: 40px;\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  justify-content: center;\n  background: #222;\n  color: #ddd;\n  border-right: 1px solid #000;\n  font-family: Courier New;\n\n  ${({ isSelected }) =>\n    isSelected &&\n    `\n    background: #333;\n    color: #fff;\n  `}\n`;\n\nconst DownloadButton = styled.div`\n  position: absolute;\n  top: 5px;\n  right: 8px;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  background-image: url(${iconDownload});\n  background-size: 24px 24px;\n  background-position: center center;\n  background-repeat: no-repeat;\n  filter: drop-shadow(0px 0px 5px rgba(0,0,0,1));\n  transition: filter 0.5s;\n\n  &:hover {\n    transition: filter 0s;\n    filter: drop-shadow(0px 0px 10px rgba(255,255,255,1));\n  }\n`;","import React, { useState, useEffect } from \"react\";\nimport AceEditor from \"react-ace\";\n\nexport default function ParserEditor({\n  isPortraitMode,\n  data,\n  onError,\n  onDataChange\n}) {\n  const [editorValue, setEditorValue] = useState();\n\n  useEffect(() => setEditorValue(JSON.stringify(data, null, 2)), [data]);\n\n  function onChange(newValue) {\n    setEditorValue(newValue + \"\");\n\n    try {\n      const data = JSON.parse(newValue);\n      onDataChange(data);\n      onError();\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n  return (\n    <AceEditor\n      onChange={onChange}\n      value={editorValue}\n      mode=\"javascript\"\n      theme=\"monokai\"\n      fontSize={14}\n      debounceChangePeriod={1000}\n      setOptions={{ tabSize: 2 }}\n      style={{\n        width: `${isPortraitMode ? 100 : 50}vw`,\n        height: `${isPortraitMode ? 50 : 50}vh`\n      }}\n    />\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport ParserEditor from \"./ParserEditor\";\nimport Result from \"./Result\";\nimport Source from \"./Source\";\nimport Parser from \"./Parser\";\n\nconst DEFAULT_PARSER_FUNC = `\nfunction parse(data) {\n  return [{ name: 'Untitle', data }];\n}\n`;\n\nconst DEFAULT_SOURCE = {\n  apple: \"aaa\",\n  blue: \"bbb\",\n  cat: \"ccc\"\n};\n\nconst tmpParser = localStorage.getItem('parser');\nconst tmpSource = JSON.parse(localStorage.getItem('source'));\nconst defaultParser = new Parser(tmpParser || DEFAULT_PARSER_FUNC);\nconst defaultSource = tmpSource ||DEFAULT_SOURCE;\n\nexport default function App() {\n  const [source, setSource] = useState(defaultSource);\n  const [parser, setParser] = useState(defaultParser);\n  const [result, setResult] = useState([]);\n  const [error, setError] = useState();\n  const [isPortraitMode, setIsPortraitMode] = useState(window.innerHeight >= window.innerWidth);\n\n  useEffect(() => {\n    function onResize() {\n      setIsPortraitMode(window.innerHeight >= window.innerWidth);\n    }\n    window.addEventListener(\"resize\", onResize);\n    return () => window.removeEventListener(\"resize\", onResize);\n  }, []);\n\n  useEffect(() => {\n    try{\n      const result = parser.parse(source);\n      const isFormatCorrect = Array.isArray(result) && result[0].name;\n      if(isFormatCorrect) {\n        setResult(result);\n      } else {\n        setError(new Error('Ivalid format'));\n      }\n    } catch(e) {\n      setError(e);\n    }\n    localStorage.setItem('parser', parser.toString());\n    localStorage.setItem('source', JSON.stringify(source));\n  }, [source, parser]);\n\n  return (\n    <Root isPortraitMode={isPortraitMode}>\n      <ParserEditor\n        isPortraitMode={isPortraitMode}\n        parser={parser}\n        onError={setError}\n        onParserChange={setParser}\n      />\n      <Column isPortraitMode={isPortraitMode}>\n        <Source\n          isPortraitMode={isPortraitMode}\n          data={source}\n          onError={setError}\n          onDataChange={setSource}\n        />\n        <Result isPortraitMode={isPortraitMode} data={result} error={error} />\n      </Column>\n    </Root>\n  );\n}\n\nconst Root = styled.div`\n  display: flex;\n\n  flex-direction: ${({ isPortraitMode }) =>\n    isPortraitMode ? \"column\" : \"row\"};\n`;\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  ${({ isPortraitMode }) =>\n    isPortraitMode\n      ? `\n    width: 100vw;\n  `\n      : `\n    width: 50vw;\n    height: 100vh;\n  `}\n`;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"react-ace\";\nimport \"brace/mode/javascript\";\nimport \"brace/theme/monokai\";\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));","const mockDataProxyHandler = {\n  get: () => new Proxy({}, mockDataProxyHandler)\n}\n\nexport default class Parser {\n  constructor(func) {\n    this.parse = eval(`(${func})`);\n    const mockData = new Proxy({}, mockDataProxyHandler);\n    this.parse(mockData);\n  }\n\n  toString() {\n    return this.parse.toString();\n  }\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAbklEQVR4Ae3WoQ0AIBBDUUZhFEY7z1JsVmQVqYBQ058gyT11uZaSIwADQIk3foIKugoooIACejC4H5begm4d/vZb1MS7ZmN2FDF+FDFmlMAYUMT4UcSYUQaMQBHjRxHjRxGTkj4z7qqANCil5GsD2tZbG0VdxGcAAAAASUVORK5CYII=\""],"sourceRoot":""}